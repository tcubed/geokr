{% extends "base.html" %}
{% block content %}
<div class="container mt-4" style="max-width:400px;">
  <h2>Options</h2>
  <form id="options-form">
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="debug_mode" name="debug_mode"
        {% if debug_mode %}checked{% endif %}>
      <label class="form-check-label" for="debug_mode">
        Debug mode
      </label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="watch_position" name="watch_position"
        {% if watch_position %}checked{% endif %}>
      <label class="form-check-label" for="watch_position">
        Watch Position (live tracking)
      </label>
    </div>
    <button type="submit" class="btn btn-primary mt-3">Save</button>
  </form>
</div>
<script>
  document.getElementById('options-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const debug = document.getElementById('debug_mode').checked ? '1' : '';
    const watch = document.getElementById('watch_position').checked ? '1' : '';
    document.cookie = "debug_mode=" + debug + ";path=/;max-age=31536000";
    document.cookie = "watch_position=" + watch + ";path=/;max-age=31536000";
    //location.reload();
    window.location = "/main"; // Redirect to main page
  });
</script>
{% endblock %}
