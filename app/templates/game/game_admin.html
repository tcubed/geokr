{% extends "base.html" %}

{% block title %}
Game Admin
{% endblock %}

{% block content %}
<div class="container mt-5">
  <h2 class="mb-4">Start a Game</h2>

  <form method="POST" action="" id="startGameForm">
  <select class="form-select" id="gameSelect" name="game_id" required>
    <option value="" disabled selected>Select a game</option>
    {% for game in games %}
      <option value="{{ game.id }}">{{ game.name }}</option>
    {% endfor %}
  </select>
  <button type="submit" class="btn btn-primary mt-2">Start Game</button>
</form>
</div>

<script>
  document.getElementById('startGameForm').addEventListener('submit', function(event) {
    const gameId = document.getElementById('gameSelect').value;
    if (!gameId) {
      event.preventDefault();
      alert("Please select a game.");
    } else {
      // Override the form action with the chosen game ID
      this.action = "/start_game/" + gameId;
    }
  });
</script>
{% endblock %}
